<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BCA Store Admin</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif; margin:20px; background:#f4f6fc; }
h1 { color:#2b3a67; }
input { padding:8px; margin:5px 0; border-radius:6px; border:1px solid #ccc; width:250px; }
button { padding:8px 14px; border:none; border-radius:6px; background:#2b3a67; color:white; cursor:pointer; }
button:hover { background:#1a2550; }
#orders, #feedbacks { margin-top:20px; background:#fff; padding:15px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
p { margin:5px 0; }
</style>
</head>
<body>

<h1>BCA Store Admin Panel</h1>
<input type="password" id="adminPass" placeholder="Enter Admin Password">
<button onclick="checkAdmin()">Login</button>

<div id="adminContent" style="display:none;">
  <h2>Orders</h2>
  <div id="orders"></div>

  <h2>Feedback</h2>
  <div id="feedbacks"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyBBV_jXIewP2OfcqYxtj2regQCicduc2fY",
  authDomain: "ount-32a16.firebaseapp.com",
  projectId: "ount-32a16",
  storageBucket: "ount-32a16.firebasestorage.app",
  messagingSenderId: "865150215832",
  appId: "1:865150215832:web:d6ab92c351584c71aa12ed"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Admin Login
function checkAdmin(){
  const pass = document.getElementById("adminPass").value;
  const correctPass = "Harsh@123"; // change to your secure password
  if(pass === correctPass){
    document.getElementById("adminContent").style.display = "block";
    loadAdminData();
  } else {
    alert("Incorrect password!");
  }
}

// Load Orders & Feedback
async function loadAdminData(){
  const ordersSnap = await getDocs(collection(db,"orders"));
  const feedbackSnap = await getDocs(collection(db,"feedbacks"));

  const ordersDiv = document.getElementById("orders");
  ordersDiv.innerHTML = "";
  ordersSnap.forEach(doc=>{
    const data = doc.data();
    ordersDiv.innerHTML += `<p>${new Date(data.time.seconds*1000).toLocaleString()} - ${data.product} - ${data.name} - ${data.mobile}</p>`;
  });

  const feedbackDiv = document.getElementById("feedbacks");
  feedbackDiv.innerHTML = "";
  feedbackSnap.forEach(doc=>{
    const data = doc.data();
    feedbackDiv.innerHTML += `<p>${new Date(data.time.seconds*1000).toLocaleString()} - ${data.product} - ${data.feedback}</p>`;
  });
}
</script>
</body>
</html>
